# AWS EC2 T系インスタンスを選定する際の注意点

T系のEC2インスタンスとはT2.microやT3.largeなど先頭にTの文字がつくインスタンスタイプ。
CPU使用率にベースラインレベルを定義して、そのレベルを超えて使用するときにCPUをバースト（一時的にCPU性能を向上）させる機能がある。
ベースラインのCPU使用率に加え、バーストした分を別途課金することでコスト効率がよいインスタンスとなる。

| インスタンスタイプ | vCPU | メモリ[GiB] | 料金（東京）[ USD / h ] |
| ------------------ | ---- | ----------- | ------------------------ |
| t3.large           | 2    | 8           | 0.1364                   |
| m5.large           | 2    | 8           | 0.216                    |

したがって汎用インスタンスのM系と比較すると上記のような料金の差があることがわかる。


# CPUクレジットについて

T系インスタンスのvCPUにはvCPUあたりのベースライン使用率がある。
この使用率を超えて使用する場合、vCPUをバーストさせるために別途CPUクレジットを使用する。
T系のインスタンスファミリーにはそれぞれ
「1hあたりに受け取るCPUクレジット」、「蓄積可能な最大クレジット」、「vCPUあたりのベースライン使用率」が存在する。
参照：[クレジット表](https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/burstable-credits-baseline-concepts.html#burstable-performance-instances-credit-table)

CPUクレジットには限りがあり、CPUクレジットが枯渇してしまうとvCPUはバーストできなくなりベースラインでの使用を余儀なくされる。


# 結論

Tシリーズの紹介では「一時的なスパイクが生じるCPU使用率を持つサーバー向け」とされている。
決まった時間に利用されるバッチサーバーやそもそも負荷があまりかからないサーバーなど
常時使用するCPU率とバースト頻度と時間によってインスタンスの選定が必要と思われる。
